{namespace s=PAGEmachine\Searchable\ViewHelpers}
<f:layout name="Default" />
<f:section name="main">

	<f:if condition="{term}">

	<div class="results-count">Found {result.hits.total} results (took {result.took}ms). Showing page {currentPage} of {totalPages -> f:count()}.</div>

		<f:if condition="{result.hits.hits}">

				<div class="results">

						<f:for each="{result.hits.hits}" as="hit">
								<div class="result">

										<h3><s:link.page arguments="{hit._source.searchable_meta.link}">
												{hit._source.searchable_meta.link.title}
										</s:link.page></h3>

										<div class="result-preview">
												<f:format.raw>{hit._source.searchable_meta.preview}</f:format.raw>
										</div>
										<div class="result-meta">
												<span class="result-score">Score: {hit._score}</span>
										</div>

								</div>
						</f:for>

				</div>
				<div class="pagination">
					<f:if condition="{previousPage}">
						<f:link.page pageUid="{settings.resultPage}" additionalParams="{tx_searchable : {term : term, page : previousPage}}">Prev</f:link.page>
					</f:if>
					<f:for each="{totalPages}" as="page">
						<f:if condition="{page} == {currentPage}">
							<f:then>{page}</f:then>
							<f:else>
								<f:link.page pageUid="{settings.resultPage}" additionalParams="{tx_searchable : {term : term, page : page}}">{page}</f:link.page>
							</f:else>
						</f:if>
					</f:for>
					<f:if condition="{nextPage}">
						<f:link.page pageUid="{settings.resultPage}" additionalParams="{tx_searchable : {term : term, page : nextPage}}">Next</f:link.page>
					</f:if>
				</div>

		</f:if>
	</f:if>

</f:section>
