{namespace s=PAGEmachine\Searchable\ViewHelpers}
<f:layout name="Default" />
<f:section name="main">

	<f:if condition="{term}">
		<div class="results-count">
			<f:translate key="results.information" arguments="{0: result.hits.total, 1: result.took}" />
			<f:translate key="results.pageinformation" arguments="{0: currentPage}" /> {totalPages -> f:count()}.
		</div>

		<f:if condition="{result.hits.hits}">

				<div class="results">

						<f:for each="{result.hits.hits}" as="hit">
								<div class="result">

										<h3><s:link.page arguments="{hit._source.searchable_meta.link}">
												{hit._source.searchable_meta.link.title}
										</s:link.page></h3>

										<div class="result-preview">
												<f:format.raw>{hit._source.searchable_meta.preview}</f:format.raw>
										</div>
										<div class="result-meta">
												<span class="result-score"><f:translate key="results.score">Score</f:translate>: {hit._score}</span>
										</div>

								</div>
						</f:for>

				</div>
				<div class="pagination">
					<f:if condition="{previousPage}">
						<f:link.page pageUid="{settings.resultPage}" additionalParams="{tx_searchable : {term : term, page : previousPage}}"><f:translate key="results.previous">Prev</f:translate></f:link.page>
					</f:if>
					<f:for each="{totalPages}" as="whatever" key="page">
						<f:if condition="{page} == {currentPage}">
							<f:then>{page}</f:then>
							<f:else>
								<f:link.page pageUid="{settings.resultPage}" additionalParams="{tx_searchable : {term : term, page : page}}">{page}</f:link.page>
							</f:else>
						</f:if>
					</f:for>
					<f:if condition="{nextPage}">
						<f:link.page pageUid="{settings.resultPage}" additionalParams="{tx_searchable : {term : term, page : nextPage}}"><f:translate key="results.next">Next</f:translate></f:link.page>
					</f:if>
				</div>

		</f:if>
	</f:if>

</f:section>
